# EasyAdmin 优惠券控制器

## 概述

已为优惠券模块创建了完整的EasyAdmin后台管理界面，包括：

### 1. CouponCrudController

**文件位置**: `src/Controller/Admin/CouponCrudController.php`

**功能特性**:
- 完整的CRUD操作（创建、读取、更新、删除）
- 详细的字段配置和表单验证
- 智能过滤器支持
- 关联实体自动完成
- 图片上传处理
- 审计字段显示

**主要字段配置**:
- **基础字段**: ID、编码、名称、分类
- **图片字段**: ICON图标、列表背景
- **时间字段**: 有效期、创建/更新时间
- **激活字段**: 是否需要激活、激活有效天数
- **关联字段**: 投放渠道
- **统计字段**: 券码数量（格式化显示）
- **状态字段**: 有效状态
- **审计字段**: 创建人、更新人、IP地址

**过滤器支持**:
- 名称搜索
- 编码搜索
- 分类筛选
- 状态筛选
- 时间范围筛选

### 2. AdminMenu 服务

**文件位置**: `src/Service/AdminMenu.php`

**菜单结构**:
```
优惠券管理
├── 优惠券管理 (fas fa-ticket-alt)
├── 分类管理 (fas fa-tags)
├── 券码管理 (fas fa-qrcode)
├── 渠道管理 (fas fa-broadcast-tower)
├── 条件管理 (fas fa-filter)
├── 领取条件 (fas fa-hand-paper)
├── 使用条件 (fas fa-check-circle)
├── 优惠信息 (fas fa-percentage)
└── 批次管理 (fas fa-layer-group)
```

### 3. 模板文件

**模板目录**: `templates/admin/coupon/`

已创建的模板文件：
- `requirements.html.twig` - 领取条件显示
- `satisfies.html.twig` - 使用条件显示
- `discounts.html.twig` - 优惠信息显示
- `conditions.html.twig` - 新条件系统显示

### 4. 字段映射

控制器字段配置遵循实体的注解配置：

**实体注解** → **控制器字段**
- `#[ListColumn]` → 列表页显示
- `#[FormField]` → 表单字段
- `#[Filterable]` → 过滤器
- `#[BoolColumn]` → 布尔字段显示
- `#[PictureColumn]` → 图片字段显示

### 5. 使用说明

1. **查看优惠券列表**: 访问优惠券管理菜单
2. **创建优惠券**: 点击"新建优惠券"按钮
3. **编辑优惠券**: 在列表中点击"编辑"按钮
4. **查看详情**: 在列表中点击"查看详情"按钮
5. **过滤数据**: 使用右侧过滤器面板
6. **搜索**: 使用顶部搜索框搜索名称、编码、备注

### 6. 技术特性

- **关联实体自动完成**: 分类和渠道字段支持自动完成
- **图片上传**: 支持ICON和背景图片上传
- **数据格式化**: 券码数量自动格式化显示
- **响应式设计**: 表单字段支持栅格布局
- **多语言支持**: 所有标签使用中文
- **权限控制**: 通过`#[AsPermission]`注解控制权限

### 7. 扩展建议

如需扩展功能，可以：
1. 添加自定义操作按钮
2. 创建批量操作
3. 添加导出功能
4. 创建自定义报表
5. 添加数据验证规则

## 注意事项

- 所有模板文件使用Bootstrap样式
- 图片上传路径配置为`/uploads`
- 过滤器支持多种数据类型
- 实体关联使用延迟加载优化性能 